"use strict";(self["webpackChunkastrosync"]=self["webpackChunkastrosync"]||[]).push([[266],{4266:(e,n,l)=>{l.r(n),l.d(n,{default:()=>C});var a=l(9835),u=l(499),t=l(6970),i=l(1957);const r=e=>((0,a.dD)("data-v-22748e14"),e=e(),(0,a.Cn)(),e),o={ref:"terminal",id:"container"},v={style:{overflow:"auto"},id:"scroll_container"},s={style:{height:"600px"}},d={key:0,id:"banner"},c=["align","src","width","height"],p={key:0,style:{"letter-spacing":"4px"}},g={key:1},h={key:2},m=r((()=>(0,a._)("p",null,null,-1))),f={id:"input-line",class:"input-line"},b={class:"prompt"},w={name:"TerminalWidget",props:{shell_input:{required:!1},banner:{type:Object,required:!1,default:()=>({header:"Ground Station Shell",helpHeader:'Enter "help" for more information.',sign:"VueShell $"})},commands:{type:Array}},emits:["shell_output"],setup(e,{emit:n}){const l=e;var r=(0,u.iH)(""),w=(0,u.iH)([]),k=(0,u.iH)(0),y=(0,u.iH)(0);const _=(0,u.iH)(null),H=(0,u.iH)(null),D=(0,u.iH)(null);function q(e){D.value.send(e)}function S(){w.value.length&&(w.value[k.value]?w.value[k.value]=r.value:y.value=r.value),k.value--,k.value<0&&(k.value=0),r.value=w.value[k.value]?w.value[k.value]:y.value}function x(){w.value.length&&(w.value[k.value]?w.value[k.value]=r.value:y.value=r.value),k.value++,k.value>w.value.length&&(k.value=w.value.length),r.value=w.value[k.value]?w.value[k.value]:y.value}function C(){r.value&&(w.value[w.value.length]=r.value,k.value=w.value.length);var e=H.value.parentNode.cloneNode(!0);e.removeAttribute("id"),e.classList.add("line");var a=e.querySelector("input.cmdline");if(a.autofocus=!1,a.readOnly=!0,_.value.appendChild(e),q(r.value),r.value&&r.value.trim()){var u=r.value.split(" ").filter((function(e){return e})),t=u[0].toLowerCase();u=u.splice(1)}"clear"==t?(_.value.innerHTML="",r.value=""):(l.commands&&l.commands.forEach((e=>{t!=e.name||j(e.get())})),""!=r.value.trim()&&n("shell_output",r.value),r.value="")}function j(e){_.value.insertAdjacentHTML("beforeEnd","<pre>"+e+"</pre>"),r.value=""}return(0,a.bv)((()=>{D.value=new WebSocket("wss://undefined/websocket_api/ws"),D.value.onopen=function(e){console.log(e),console.log("Successfully connected to the echo websocket server...")},D.value.onmessage=function(e){_.value.insertAdjacentHTML("beforeEnd",'<pre><div class="ls-files">'+e.data+"</div></pre>"),r.value="",H.value.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},D.value.onerror=function(e){console.log(e)}})),(n,l)=>((0,a.wg)(),(0,a.iD)("div",{onClick:l[5]||(l[5]=e=>H.value.focus()),style:{"min-height":"350px"}},[(0,a._)("div",o,[(0,a._)("div",v,[(0,a._)("div",s,[e.banner?((0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("p",null,[e.banner.img?((0,a.wg)(),(0,a.iD)("img",{key:0,align:e.banner.img.align?e.banner.img.align:"left",src:e.banner.img.link?e.banner.img.link:"@/logo.png",width:e.banner.img.width?e.banner.img.width:"100px",height:e.banner.img.height?e.banner.img.height:"100px"},null,8,c)):(0,a.kq)("",!0)]),e.banner.header?((0,a.wg)(),(0,a.iD)("h3",p,(0,t.zw)(e.banner.header),1)):(0,a.kq)("",!0),e.banner.subHeader?((0,a.wg)(),(0,a.iD)("p",g,(0,t.zw)(e.banner.subHeader),1)):(0,a.kq)("",!0),e.banner.helpHeader?((0,a.wg)(),(0,a.iD)("p",h,(0,t.zw)(e.banner.helpHeader),1)):(0,a.kq)("",!0),m])):(0,a.kq)("",!0),(0,a._)("output",{ref_key:"output",ref:_},null,512),(0,a._)("div",f,[(0,a._)("div",b,[(0,a._)("div",null,(0,t.zw)(e.banner.sign?e.banner.sign:">>"),1)]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>(0,u.dq)(r)?r.value=e:r=e),ref_key:"input_cmd",ref:H,onKeydown:[l[1]||(l[1]=(0,i.D2)((e=>C(e)),["enter"])),l[2]||(l[2]=(0,i.D2)((e=>S()),["up"])),l[3]||(l[3]=(0,i.D2)((e=>x()),["down"])),l[4]||(l[4]=(0,i.D2)((e=>e.preventDefault()),["tab"]))],class:"cmdline",autofocus:""},null,544),[[i.nr,(0,u.SU)(r)]])])])])],512)]))}};var k=l(1639);const y=(0,k.Z)(w,[["__scopeId","data-v-22748e14"]]),_=y,H={name:"TerminalPage",setup(e){return(e,n)=>{const l=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(l,{class:"fit row wrap justify-center items-start content-start q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(_),{width:"600px",height:"700px"})])),_:1})}}};var D=l(9885),q=l(9984),S=l.n(q);const x=H,C=x;S()(H,"components",{QPage:D.Z})}}]);