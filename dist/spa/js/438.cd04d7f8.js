(self["webpackChunkastrosync"]=self["webpackChunkastrosync"]||[]).push([[438],{5183:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var l=a(9835),s=a(499),o=a(1569),n=a(9302),r=a(2502);const i=(0,r.Q_)("register_session",{state:()=>({sat_name:"",session_list:[]})}),u={class:"col-3"},c={name:"AvailableSats",setup(e){const t=i(),a=(0,s.iH)([]),n=(0,s.iH)(""),r=(0,s.iH)([]),c=(0,s.iH)([{name:"name",required:!0,label:"Sat name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"OBJECT_ID",align:"center",label:"ID",field:"OBJECT_ID",sortable:!0},{name:"NORAD_CAT_ID",align:"center",label:"Norad cat. id",field:"NORAD_CAT_ID",sortable:!0}]);return o.api.get("/satellites").then((e=>{r.value=e.data})).catch((e=>{console.log("error"),console.log(e)})),(e,o)=>{const i=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),m=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)(m,{class:"available_sat_table",title:"List of active satellite",style:{height:"600px","min-width":"300px"},selection:"single",selected:a.value,"onUpdate:selected":[o[1]||(o[1]=e=>a.value=e),o[2]||(o[2]=e=>e.length>0?(0,s.SU)(t).sat_name=e[0].name:(0,s.SU)(t).sat_name="")],rows:r.value,columns:c.value,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],filter:n.value,"no-data-label":"I didn't find anything for you","no-results-label":"The filter didn't uncover any results"},{"top-right":(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(d,{dense:"",debounce:"400",color:"primary",modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},{append:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"search"})])),_:1},8,["modelValue"])])])),_:1},8,["selected","rows","columns","filter"])}}};var d=a(7580),m=a(3119),p=a(2857),f=a(9984),_=a.n(f);const v=c,w=v;_()(c,"components",{QTable:d.Z,QInput:m.Z,QIcon:p.Z});var g=a(6970),b=a(4170),h=a(9362);const y={class:"q-gutter-md",style:{"min-width":"200px"}},k={name:"SessionsTable",setup(e){const t=i(),a=(0,s.iH)("YYYY-MM-DD");function n(e){if(null!==e){var a="";"string"===typeof e?a=`/sessions?sat_name=${t.sat_name}&start_date=${e}&end_date=${e}`:"object"===typeof e&&(a=`/sessions?sat_name=${t.sat_name}&start_date=${b.ZP.formatDate(d.value.from,"YYYY-MM-DD")}&end_date=${b.ZP.formatDate(d.value.to,"YYYY-MM-DD")}`),o.api.get(a).then((e=>{m.value=e.data})).catch((()=>{console.log("error")}))}}function r(){return 0===u.value.length?"":`${u.value.length} record${u.value.length>1?"s":""} selected of ${m.value.length}`}(0,l.bv)((()=>{n(d),console.log(h.keycloak.token),console.log(h.keycloak)}));const u=(0,s.iH)([]),c=(0,s.iH)((e=>{if(null===e)return"";switch(typeof e){case"object":return e.from+" - "+e.to;case"string":return e+" - "+e;default:return""}})),d=(0,s.iH)({from:b.ZP.formatDate(new Date,a.value),to:b.ZP.formatDate(new Date,a.value)}),m=(0,s.iH)([]),p=(0,s.iH)([{name:"status",align:"center",label:"Status",field:"status",sortable:!0},{name:"start_time",required:!0,label:"Start Time",align:"left",field:"start_time",format:e=>`${e}`,sortable:!0},{name:"finish_time",align:"center",label:"Finish Time",field:"finish_time",sortable:!0},{name:"duration",align:"center",label:"Duration, sec",field:"duration_sec",sortable:!0},{name:"station",align:"center",label:"Station",field:"station",sortable:!0}]);return(e,o)=>{const i=(0,l.up)("q-checkbox"),f=(0,l.up)("q-td"),_=(0,l.up)("q-badge"),v=(0,l.up)("q-tr"),w=(0,l.up)("q-date"),h=(0,l.up)("q-popup-proxy"),k=(0,l.up)("q-icon"),W=(0,l.up)("q-field"),D=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)(D,{class:"available_sat_table",title:`Available sessions for ${(0,s.SU)(t).sat_name}`,style:{height:"600px"},"selected-rows-label":r,selection:"multiple",selected:u.value,"onUpdate:selected":[o[2]||(o[2]=e=>u.value=e),o[3]||(o[3]=e=>(0,s.SU)(t).session_list=e)],rows:m.value,"row-key":"start_time",columns:p.value,"virtual-scroll":"","rows-per-page-options":[0]},{body:(0,l.w5)((e=>[(0,l.Wm)(v,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,color:"primary"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(f,{key:"status",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{color:"green"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.row.status),1)])),_:2},1024)])),_:2},1032,["props"]),(0,l.Wm)(f,{key:"start_time",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.row.start_time),1)])),_:2},1032,["props"]),(0,l.Wm)(f,{key:"finish_time",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.row.finish_time),1)])),_:2},1032,["props"]),(0,l.Wm)(f,{key:"duration",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.row.duration_sec),1)])),_:2},1032,["props"]),(0,l.Wm)(f,{key:"station",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.row.station),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),"top-right":(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(W,{filled:"",label:"Search period","stack-label":"",class:"cursor-pointer","bottom-slots":"",modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e),rules:[e=>!!e||"Field is required"]},{control:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(c.value(d.value)),1)])),append:(0,l.w5)((()=>[(0,l.Wm)(k,{name:"event",class:"cursor-pointer"})])),default:(0,l.w5)((()=>[(0,l.Wm)(h,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:d.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>d.value=e),n],"today-btn":"",mask:a.value,range:"",options:e=>e>=(0,s.SU)(b.ZP).formatDate(Date.now(),"YYYY/MM/DD")&&e<=(0,s.SU)(b.ZP).formatDate((0,s.SU)(b.ZP).addToDate(Date.now(),{months:1}),"YYYY/MM/DD")},null,8,["modelValue","mask","options"])])),_:1})])),_:1},8,["modelValue","rules"])])])),_:1},8,["title","selected","rows","columns"])}}};var W=a(9546),D=a(7220),q=a(1221),U=a(990),Z=a(8149),S=a(2765),Q=a(7088);const Y=k,V=Y;_()(k,"components",{QTable:d.Z,QTr:W.Z,QTd:D.Z,QCheckbox:q.Z,QBadge:U.Z,QField:Z.Z,QPopupProxy:S.Z,QDate:Q.Z,QIcon:p.Z});var T=a(1470),C=a.n(T);const x={class:"q-pa-md"},H={class:"q-pa-md"},$={name:"StepperWidget",setup(e){const t=i(),a=(0,s.iH)(null),r=(0,n.Z)();function u(e){r.notify({message:e?"Session successfully registered":"There is some isues with ground station server.",color:e?"green":"red"})}function c(){if(console.log(a.value),null!=a.value){var e=new FileReader;e.readAsText(a.value,"UTF-8"),e.onload=function(e){d(e.target.result)}}else d("")}function d(e){o.api.post("/register_new_session",C().parse({sat_name:t.sat_name,session_list:t.session_list,user_script:e}),{headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e),u(!0),m.value=1})).catch((e=>{console.log(e),u(!1)}))}const m=(0,s.iH)(1);return(e,o)=>{const n=(0,l.up)("q-btn"),r=(0,l.up)("q-stepper-navigation"),i=(0,l.up)("q-step"),u=(0,l.up)("q-icon"),d=(0,l.up)("q-file"),p=(0,l.up)("q-stepper");return(0,l.wg)(),(0,l.iD)("div",x,[(0,l.Wm)(p,{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=e=>m.value=e),vertical:"",style:{"min-width":"500px"},"alternative-labels":"",color:"primary",animated:"","keep-alive":""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:1,title:"Select satellite",icon:"settings",done:m.value>1},{default:(0,l.w5)((()=>[(0,l._)("div",H,[(0,l.Wm)(w),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{onClick:o[0]||(o[0]=e=>m.value=2),color:"primary",label:"Continue",disable:""===(0,s.SU)(t).sat_name},null,8,["disable"])])),_:1})])])),_:1},8,["done"]),(0,l.Wm)(i,{name:2,title:"Select sessions",icon:"create_new_folder",done:m.value>2},{default:(0,l.w5)((()=>[(0,l.Wm)(V),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{onClick:o[1]||(o[1]=e=>m.value=3),color:"primary",label:"Continue",disable:0===(0,s.SU)(t).session_list.length},null,8,["disable"]),(0,l.Wm)(n,{flat:"",onClick:o[2]||(o[2]=e=>m.value=1),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(i,{name:3,title:"Upload user script",icon:"add_comment"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{color:"teal",filled:"",modelValue:a.value,"onUpdate:modelValue":o[3]||(o[3]=e=>a.value=e),label:"User script",style:{"max-width":"300px"}},{prepend:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"cloud_upload"})])),_:1},8,["modelValue"]),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{color:"primary",label:"Finish",onClick:c}),(0,l.Wm)(n,{flat:"",onClick:o[4]||(o[4]=e=>m.value=2),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}};var P=a(8225),I=a(8335),M=a(1992),j=a(9379),A=a(3837);const F=$,z=F;_()($,"components",{QStepper:P.Z,QStep:I.Z,QStepperNavigation:M.Z,QBtn:j.Z,QFile:A.Z,QIcon:p.Z});const B={name:"RegisterSessionPage",setup(e){return(e,t)=>{const a=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(a,{class:"fit row wrap justify-center items-start content-start q-pa-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(z)])),_:1})}}};var N=a(9885);const O=B,R=O;_()(B,"components",{QPage:N.Z})},4654:()=>{}}]);